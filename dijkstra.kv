

<ToolBar>:
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: 'Load'
            on_press: root._on_load_btn_click()
        Button:
            text: 'Save'
            on_press: root._on_save_btn_click()
        Button:
            text: 'Move'
            on_press: root._on_move_btn_click()
        Button:
            text: 'Add'
            on_press: root._on_add_btn_click()
        Button:
            text: 'Delete'
            on_press: root._on_delete_btn_click()
        Button:
            text: 'Connect'
            on_press: root._on_connect_btn_click()
        Button:
            text: 'Dijkstra'
            on_press: root._on_dijkstra_btn_click()

<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        title: 'Dijkstra'
        GraphCanvas:
            size_hint: 1, .9
        ToolBar:
            size_hint: 1, .1

<ColPopup>:
    title: 'Select Color'
    size_hint: .5, .7
    auto_dismiss: False
    ColorPickerWidget:
        color: root.selected_color
        on_color: root.selected_color = self.color
        Button:
            text: 'Finalize'
            pos_hint: {'center_x': .755, 'y': .02}
            size_hint: .5, .15
            on_press: root.dismiss()

<EditConnectionUI>:
    title: 'Node #{} connections'.format(root.node.node_id) if root.node else 'None'
    auto_dismiss: False
    size_hint: .7, .7
    BoxLayout:
        orientation: 'vertical'
        # TODO: implement a preview canvas
        Label:
            size_hint: 1, .1
            text: 'Connections Weights'
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            GridLayout:
                cols: 2
                spacing: 2
                size_hint_y: None
                
        BoxLayout:
            size_hint: 1, .2
            orientation: 'horizontal'
            Button:
                text: 'Cancel'
                on_press: root._cancel_changes()
            Button:
                text: 'Save'
                on_press: root._save_changes()
                

<NodeUIConfig>:
    title: 'Node #{} configuration'.format(root.node.node_id) if root.node else 'None'
    auto_dismiss: False
    size_hint: .8, .8
    selected_color: [1, 0, 0, 1]
    BoxLayout:
        orientation: 'vertical'
        spacing: 2
        GridLayout:
            cols: 2
            spacing: 2
            size_hint: 1, .3
            Label:
                text: 'Label'
            TextInput:
                id: label_input
                text: '{}'.format(root.node.label) if root.node else 'Undefined'
                multiline: False
                on_text: root._on_label_input(self.text)
            Label:
                text: 'Color'
            Button:
                text: 'Pick a color'
                on_release: root._open_color_picker()
            Label:
                text: 'Connections'
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: '{}'.format(root._count_connections()) if root.node else '-1'
                Button:
                    text: 'Edit'
                    on_release: root._open_connections_popup()
        NodeUIPreview:
            size_hint: 1, .5
            node_label: root.node.label if root.node else 'Undefined'
            node_color: root.node.color if root.node else [1, 1, 1, 1]
        
        BoxLayout:
            orientation: 'horizontal'
            spacing: 2
            size_hint: 1, .2
            Button:
                text: 'Cancel'
                on_release: root.dismiss()
            Button:
                text: 'Apply'
                on_release: root._apply_changes()


<FindPath>:
    title: 'Find the optimal path using Dijkstra algorithm'
    auto_dismiss: False
    size_hint: .6, .7
    BoxLayout:
        orientation: 'vertical'
        Label:
            size_hint: 1, None
            height: 44
            text: 'Find the optimal path'
        GridLayout:
            size_hint: 1, 1
            spacing: 2
            cols: 2
        BoxLayout:
            size_hint: 1, None
            height: 44
            orientation: 'horizontal'
            Button:
                text: 'Close'
                on_release: root.dismiss()
            Button:
                text: 'Calculate / Preview'
                on_release: root._calculate()
